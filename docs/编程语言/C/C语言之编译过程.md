---
tags: 学习/编程语言/C语言
---

## 目录
- GCC编译过程
    * 预处理
    * 编译
    * 汇编
    * 链接


一个C程序的编译过程要经历以下几个阶段：
![编译过程](https://zhangjiyou.oss-cn-beijing.aliyuncs.com/images/20220410094208.png)


## 预处理

命令
```shell
gcc -E 1.c -o hello.i
```
在预处理阶段，主要做了这几件事情
1. 头文件展开 --- 不检查语法错误
2. 宏定义替换  --- 将代码中的宏定义替换为对应的值
3. 替换注释     --- 将注释替换成空行
4. 展开条件编译 --- 根据条件来展开指令

## 编译
命令
```shell
gcc -S xxx.i -o xxx.s
```
1. 逐行检查语法错误   --- 这是最耗时的一个步骤
2. 将C程序翻译成汇编程序


## 汇编
命令
```shell
gcc -c xxx.s -o xxx.o
```
1. 将汇编指令转换成二进制程序

## 链接
命令
```shell
gcc xxx.o xxx.exe|xxx
```
1. 数据段合并
2. 数据地址回填
3. 库引入
